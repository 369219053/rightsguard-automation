# 权利卫士取证自动化系统

## 📖 项目简介

权利卫士取证自动化系统是一个基于Android Accessibility Service的自动化控制工具,用于自动化操作权利卫士应用进行录屏取证。系统通过无障碍服务实现对权利卫士应用的自动化控制,提高取证效率,减少人工操作成本。

### 核心价值
- ✅ **自动化取证** - 无需人工操作,自动完成录屏取证流程
- ✅ **提高效率** - 批量处理取证任务,节省时间成本
- ✅ **稳定可靠** - 基于Android系统服务,运行稳定
- ✅ **易于部署** - 支持vivo等主流Android设备

### 使用场景
- 批量录屏取证任务
- 无人值守自动化取证
- 定时取证任务执行
- 远程控制取证操作

---

## ✨ 核心功能

### 1. 自动化录屏控制
- ✅ 自动启动权利卫士应用
- ✅ 自动点击"录屏取证"按钮
- ✅ 自动填充备注内容
- ✅ 自动点击"开始录屏取证"按钮
- ✅ 自动处理系统录屏权限弹窗
  - 智能检测"单个应用"下拉框
  - 自动点击"整个屏幕"选项
  - 自动点击"立即开始"按钮
- ✅ 自动处理应用验真界面
  - 自动选择抖音应用
  - 自动截屏保存验真页面
  - 自动点击"立即验证"按钮
- ✅ 完整自动化流程(从启动到开始录屏)

### 2. 截屏与报告生成
- ✅ 自动截屏保存应用验真页面
- ✅ 截图保存到公共相册(Pictures/权利卫士取证)
- 📋 生成PDF取证报告(开发中)
  - 自动收集所有截图
  - 按时间顺序整理
  - 生成完整PDF报告

### 3. 调试辅助工具
- 🔧 UI结构Dump功能(开发中,正式版将移除)
  - 悬浮窗快速Dump当前页面
  - 支持dump任何应用的UI结构
  - 复制、保存、分享功能
  - 方便开发调试和问题排查

### 4. 智能UI定位
- 文字查找定位(主要方式)
- 智能父节点查找
- 多层级节点遍历
- 状态检测与判断

### 5. 玻璃质感UI设计
- Material Design设计规范
- 淡蓝色玻璃质感卡片
- 立体悬浮效果
- 简洁现代的界面风格

### 6. 设备适配
- vivo设备深度适配
- 后台保活机制
- 电池优化配置
- 权限自动申请

---

## 🛠️ 技术栈

### Android开发
- **开发语言**: Java/Kotlin
- **最低SDK**: Android 8.0 (API 26)
- **目标SDK**: Android 13 (API 33)
- **核心技术**: Accessibility Service

### 自动化技术
- **UI自动化**: AccessibilityService
- **控件定位**: UiSelector、Resource ID
- **事件模拟**: 点击、滑动、输入
- **状态监控**: UI元素变化监听

### 目标应用
- **应用名称**: 权利卫士
- **包名**: com.unitrust.tsa
- **版本**: 4.7.0.0+
- **核心功能**: 录屏取证、时间戳认证

---

## 🚀 快速开始

### 环境要求
- Android设备 (Android 8.0+)
- 已安装权利卫士应用 (v4.7.0.0+)
- 开启无障碍服务权限
- 开启悬浮窗权限

### 安装步骤
1. 下载自动化APK安装包
2. 安装到目标Android设备
3. 开启无障碍服务权限
4. 开启悬浮窗权限
5. 配置后台保活(vivo设备)

### 启动使用
1. 打开自动化APK
2. 配置取证任务参数
3. 点击开始自动化
4. 系统自动完成取证流程

详细使用说明请查看 [开发指南](./项目文档整理/开发指南.md)

---

## 📚 详细文档

### 核心文档
- [📘 开发指南](./项目文档整理/开发指南.md) - 环境配置、技术架构、开发流程
- [🤖 自动化文档](./项目文档整理/自动化文档.md) - 自动化实现原理、核心代码、技术细节
- [❓ 常见问题](./项目文档整理/常见问题.md) - FAQ、问题排查、解决方案
- [📝 Git版本记录](./项目文档整理/Git版本记录.md) - 版本更新日志、功能迭代记录
- [🎨 UI界面设计文档](./项目文档整理/UI界面设计文档.md) - 界面设计、配色方案、交互规范

### 分析文档
- [📱 权利卫士应用分析报告](./权利卫士应用分析报告.md) - 目标应用的详细分析

---

## 🔗 重要链接

### 相关应用
- 权利卫士官网: [https://www.unitrust.cn](https://www.unitrust.cn)
- 权利卫士应用包名: `com.unitrust.tsa`

### 技术参考
- Android Accessibility Service: [官方文档](https://developer.android.com/guide/topics/ui/accessibility/service)
- Android UI Automator: [官方文档](https://developer.android.com/training/testing/ui-automator)

---

## ⚠️ 重要提示

### 环境要求 🔴 重要!

**权利卫士环境检测**:
- ⚠️ 权利卫士会检测开发者选项和USB调试
- ⚠️ 检测到异常环境会拒绝运行
- ✅ 使用时必须关闭开发者选项
- ✅ 使用时必须关闭USB调试
- ✅ 确保环境100%干净,保证取证有效性

**开发策略**:
- 开发阶段: 可以开启调试,用于开发和测试
- 使用阶段: 必须关闭调试,确保环境干净
- 采用文字查找定位,不依赖dump页面
- 详见 [开发指南](./项目文档整理/开发指南.md)

### 使用限制
- 本系统仅用于合法的取证自动化场景
- 需要在权利卫士应用已登录的状态下使用
- 录屏过程中请勿锁屏或接听电话
- 确保设备网络连接稳定
- **使用前必须关闭开发者选项**

### vivo设备配置
- 必须开启自启动权限
- 必须关闭电池优化
- 必须允许后台高耗电
- 必须开启悬浮窗权限

详细配置说明请查看 [常见问题](./项目文档整理/常见问题.md)

---

## 📅 更新日志

### V1.6 (开发中) - 最新版本

**调试辅助工具 + PDF报告生成**

- 🔧 UI结构Dump功能(正式版将移除)
  - 悬浮窗快速Dump按钮
  - 支持dump任何应用的UI结构
  - 复制、保存、分享功能
- 📋 PDF取证报告生成(开发中)
  - 自动收集所有截图
  - 生成完整PDF报告

### V1.5 (2025-01-20)

**应用验真界面自动化 + 截屏保存到相册**

- ✅ 自动检测并点击抖音容器
- ✅ 随机延迟1-3秒模拟真实用户
- ✅ 自动截屏保存应用验真页面
- ✅ 截图保存到公共相册(Pictures/权利卫士取证)
- ✅ 使用MediaStore API保存到相册
- ✅ 阻止主循环重复点击

详细更新内容请查看 [Git版本记录](./项目文档整理/Git版本记录.md)

### V1.4 (2025-01-20)

**系统录屏权限弹窗自动化完善**

- ✅ 通过按钮ID识别系统对话框
- ✅ 修复点击时序问题
- ✅ 优化等待时间策略

### V1.3 (2025-01-19)

**系统录屏权限弹窗自动化 + 玻璃质感UI优化**

- ✅ 实现系统录屏权限弹窗自动化处理
- ✅ 智能检测并点击"单个应用"下拉框
- ✅ 自动选择"整个屏幕"选项
- ✅ 自动点击"立即开始"按钮
- ✅ 完成从启动到开始录屏的完整自动化
- ✅ 优化UI界面,实现玻璃质感设计

### V1.2 (2025-01-19)

**备注输入与自动填充功能**

- ✅ 添加备注输入框
- ✅ 实现备注自动填充
- ✅ 实现自动点击"开始录屏取证"
- ✅ 修复无障碍服务配置问题

### V1.1 (2026-01-19)

**Android UI界面开发**

- ✅ 完成Android UI界面开发
- ✅ 实现Material Design设计规范
- ✅ 创建主界面、设置界面、日志界面
- ✅ 设计悬浮窗控制面板
- ✅ 统一淡蓝色配色方案

### V1.0 (2026-01-19)

**项目初始化**

- ✅ 完成项目文档系统建立
- ✅ 完成权利卫士应用分析
- ✅ 完成技术方案设计
- ✅ 创建核心文档体系

---

## 📄 许可证

本项目仅供学习和研究使用,请勿用于非法用途。

---

## 👨‍💻 开发团队

- 开发者: 小牛马
- 项目负责人: 刀仔老板

---

**最后更新**: 2026-01-19 (V1.3)

