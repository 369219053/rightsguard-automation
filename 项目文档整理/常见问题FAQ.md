# 常见问题FAQ

[← 返回README](../README.md)

---

## 📋 目录

1. [安装和配置问题](#安装和配置问题)
2. [权限问题](#权限问题)
3. [悬浮窗问题](#悬浮窗问题)
4. [自动化问题](#自动化问题)
5. [UI Dump问题](#ui-dump问题)
6. [其他问题](#其他问题)

---

## 🔧 安装和配置问题

### Q1: APK安装失败怎么办?

**A**: 请检查以下几点:
1. ✅ 确保Android版本 ≥ 8.0 (API 26)
2. ✅ 确保有足够的存储空间 (至少2GB)
3. ✅ 如果提示"未知来源",请在设置中允许安装未知来源应用
4. ✅ 如果提示"解析包错误",请重新下载APK

### Q2: 应用闪退怎么办?

**A**: 请尝试以下步骤:
1. ✅ 清除应用数据和缓存
2. ✅ 卸载后重新安装
3. ✅ 检查是否授予了所有必要权限
4. ✅ 查看logcat日志,找到崩溃原因

---

## 🔐 权限问题

### Q3: 无障碍服务无法开启?

**A**: 
1. ✅ 进入 设置 → 辅助功能 → 已安装的服务
2. ✅ 找到"权利卫士取证自动化"
3. ✅ 开启服务并授予权限
4. ✅ 如果找不到,请重新安装应用

### Q4: 悬浮窗权限无法授予?

**A**:
1. ✅ 进入 设置 → 应用管理 → 权利卫士取证自动化
2. ✅ 找到"显示在其他应用上层"或"悬浮窗"权限
3. ✅ 开启该权限
4. ✅ 部分手机需要在"特殊权限"中设置

### Q5: 存储权限无法授予?

**A**:
1. ✅ 应用启动时会自动请求存储权限
2. ✅ 如果拒绝了,请在设置中手动授予
3. ✅ Android 13+需要授予"照片和视频"权限
4. ✅ 没有存储权限将无法保存UI Dump文件

---

## 🪟 悬浮窗问题

### Q6: 悬浮窗不显示怎么办?

**A**: 请检查:
1. ✅ 是否授予了悬浮窗权限
2. ✅ 是否在设置中关闭了悬浮窗
3. ✅ 重启应用试试
4. ✅ 查看logcat日志,确认FloatingWindowService是否启动

### Q7: 悬浮窗无法拖动?

**A**: 
- ✅ V1.6版本已修复此问题
- ✅ 请更新到最新版本
- ✅ 拖动时需要移动距离>10像素才会触发拖动
- ✅ 轻点按钮不会触发拖动

### Q8: 悬浮窗挡住了权利卫士应用?

**A**:
- ✅ 按住悬浮窗空白区域拖动到不挡住的位置
- ✅ 可以拖动到屏幕边缘
- ✅ 点击"—"按钮最小化悬浮窗
- ✅ 最小化后只显示一个小圆点

### Q9: 悬浮窗按钮无法点击?

**A**:
- ✅ V1.6版本已修复此问题
- ✅ 请确保不是在拖动状态下点击
- ✅ 轻点按钮即可,不要长按

---

## 🤖 自动化问题

### Q10: 自动化无法启动?

**A**: 请检查:
1. ✅ 无障碍服务是否已开启
2. ✅ 权利卫士应用是否已打开
3. ✅ 是否在权利卫士的主界面
4. ✅ 查看悬浮窗状态指示灯

### Q11: 自动化执行到一半停止了?

**A**: 可能的原因:
1. ✅ 权利卫士界面发生了变化
2. ✅ 网络连接中断
3. ✅ 手机进入休眠状态
4. ✅ 无障碍服务被系统杀死

### Q12: 自动化点击了错误的按钮?

**A**:
- ✅ 这可能是UI元素ID变化导致的
- ✅ 请使用UI Dump功能导出当前界面结构
- ✅ 检查按钮的Resource ID是否正确
- ✅ 更新代码中的Resource ID

---

## 📤 UI Dump问题

### Q13: UI Dump功能是什么?

**A**:
- 🔧 UI Dump是开发专用功能
- 🔧 用于导出当前界面的UI结构
- 🔧 生成Markdown格式的文件
- 🔧 可以分享到微信、QQ等应用
- 🔧 正式版将移除此功能

### Q14: UI Dump文件保存在哪里?

**A**:
- 📂 保存路径: `/storage/emulated/0/Documents/RightsGuard/`
- 📂 文件名格式: `UI_Dump_yyyyMMdd_HHmmss.md`
- 📂 可以在文件管理器中查看
- 📂 也可以通过分享功能直接发送

### Q15: UI Dump分享失败?

**A**: 请检查:
1. ✅ 是否授予了存储权限
2. ✅ Documents/RightsGuard/目录是否存在
3. ✅ 存储空间是否充足
4. ✅ 分享目标应用是否已安装

---

## 🔍 其他问题

### Q16: 如何查看应用日志?

**A**:
```bash
# 连接设备后执行
adb logcat | grep "AutomationService\|FloatingWindow\|MainActivity"
```

### Q17: 如何重新编译APK?

**A**:
```bash
# 在项目根目录执行
export JAVA_HOME="/Applications/Android Studio.app/Contents/jbr/Contents/Home"
./gradlew assembleDebug
```

### Q18: 如何安装APK到设备?

**A**:
```bash
# 编译后执行
adb install -r app/build/outputs/apk/debug/app-debug.apk
```

---

## 📞 联系支持

如果以上方法都无法解决您的问题,请:
1. 📧 查看项目文档
2. 📧 查看Git版本记录
3. 📧 提交Issue到GitHub
4. 📧 联系开发者

---

[← 返回README](../README.md)

