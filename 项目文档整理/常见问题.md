# å¸¸è§é—®é¢˜ (FAQ)

[â† è¿”å›README](../README.md)

---

## ğŸ“‹ ç›®å½•

1. [å®‰è£…å’Œé…ç½®é—®é¢˜](#å®‰è£…å’Œé…ç½®é—®é¢˜)
2. [æƒé™ç›¸å…³é—®é¢˜](#æƒé™ç›¸å…³é—®é¢˜)
3. [è‡ªåŠ¨åŒ–è¿è¡Œé—®é¢˜](#è‡ªåŠ¨åŒ–è¿è¡Œé—®é¢˜)
4. [vivoè®¾å¤‡ä¸“å±é—®é¢˜](#vivoè®¾å¤‡ä¸“å±é—®é¢˜)
5. [å½•å±ç›¸å…³é—®é¢˜](#å½•å±ç›¸å…³é—®é¢˜)
6. [æ€§èƒ½å’Œç¨³å®šæ€§é—®é¢˜](#æ€§èƒ½å’Œç¨³å®šæ€§é—®é¢˜)

---

## ğŸ”§ å®‰è£…å’Œé…ç½®é—®é¢˜

### Q1: å¦‚ä½•å®‰è£…è‡ªåŠ¨åŒ–APK?

**A**: 
1. ä¸‹è½½APKæ–‡ä»¶åˆ°æ‰‹æœº
2. æ‰“å¼€æ–‡ä»¶ç®¡ç†å™¨,æ‰¾åˆ°APKæ–‡ä»¶
3. ç‚¹å‡»å®‰è£… (å¦‚æœæç¤º"æœªçŸ¥æ¥æº",éœ€è¦åœ¨è®¾ç½®ä¸­å…è®¸)
4. å®‰è£…å®Œæˆåæ‰“å¼€åº”ç”¨

**æ³¨æ„**: éƒ¨åˆ†æ‰‹æœºéœ€è¦åœ¨è®¾ç½®ä¸­å¼€å¯"å…è®¸å®‰è£…æœªçŸ¥æ¥æºåº”ç”¨"

---

### Q2: å®‰è£…åæ— æ³•æ‰“å¼€åº”ç”¨?

**å¯èƒ½åŸå› **:
- ç³»ç»Ÿç‰ˆæœ¬è¿‡ä½ (éœ€è¦Android 8.0+)
- APKæ–‡ä»¶æŸå
- ç­¾åéªŒè¯å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥Androidç‰ˆæœ¬: è®¾ç½® > å…³äºæ‰‹æœº > Androidç‰ˆæœ¬
2. é‡æ–°ä¸‹è½½APKæ–‡ä»¶
3. å¸è½½åé‡æ–°å®‰è£…
4. æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—: `adb logcat | grep AndroidRuntime`

---

### Q3: åº”ç”¨é—ªé€€æ€ä¹ˆåŠ?

**æ’æŸ¥æ­¥éª¤**:
1. æ£€æŸ¥æ˜¯å¦æˆäºˆäº†å¿…è¦æƒé™
2. æ£€æŸ¥æ˜¯å¦å®‰è£…äº†æƒåˆ©å«å£«åº”ç”¨
3. æ¸…é™¤åº”ç”¨æ•°æ®åé‡è¯•
4. æŸ¥çœ‹å´©æºƒæ—¥å¿—

**æŸ¥çœ‹å´©æºƒæ—¥å¿—**:
```bash
adb logcat -b crash
```

---

## ğŸ” æƒé™ç›¸å…³é—®é¢˜

### Q4: å¦‚ä½•å¼€å¯æ— éšœç¢æœåŠ¡?

**vivoè®¾å¤‡**:
1. æ‰“å¼€ è®¾ç½®
2. è¿›å…¥ æ›´å¤šè®¾ç½®
3. é€‰æ‹© æ— éšœç¢
4. é€‰æ‹© å·²å®‰è£…çš„æœåŠ¡
5. æ‰¾åˆ°"æƒåˆ©å«å£«è‡ªåŠ¨åŒ–"
6. æ‰“å¼€å¼€å…³å¹¶ç¡®è®¤

**å…¶ä»–è®¾å¤‡**:
1. æ‰“å¼€ è®¾ç½®
2. æœç´¢"æ— éšœç¢"
3. æ‰¾åˆ°"æƒåˆ©å«å£«è‡ªåŠ¨åŒ–"
4. æ‰“å¼€å¼€å…³

**éªŒè¯æ–¹æ³•**:
```bash
adb shell settings get secure enabled_accessibility_services
```

---

### Q5: æ— éšœç¢æœåŠ¡è‡ªåŠ¨å…³é—­?

**åŸå› **:
- ç³»ç»Ÿå®‰å…¨ç­–ç•¥
- åº”ç”¨è¢«ç³»ç»Ÿæ€æ­»
- ç”µæ± ä¼˜åŒ–é™åˆ¶

**è§£å†³æ–¹æ¡ˆ**:
1. å…³é—­ç”µæ± ä¼˜åŒ– (è§Q10)
2. å¼€å¯è‡ªå¯åŠ¨æƒé™ (è§Q11)
3. é”å®šåº”ç”¨åœ¨åå°
4. æ·»åŠ åˆ°ç™½åå•

---

### Q6: å¦‚ä½•å¼€å¯æ‚¬æµ®çª—æƒé™?

**vivoè®¾å¤‡**:
1. è®¾ç½® > åº”ç”¨ä¸æƒé™ > æƒé™ç®¡ç†
2. é€‰æ‹©"æ‚¬æµ®çª—"
3. æ‰¾åˆ°"æƒåˆ©å«å£«è‡ªåŠ¨åŒ–"
4. é€‰æ‹©"å…è®¸"

**éªŒè¯æ–¹æ³•**:
```bash
adb shell appops get <åŒ…å> SYSTEM_ALERT_WINDOW
```

---

## ğŸ¤– è‡ªåŠ¨åŒ–è¿è¡Œé—®é¢˜

### Q7: è‡ªåŠ¨åŒ–æ— æ³•å¯åŠ¨æƒåˆ©å«å£«?

**æ£€æŸ¥æ¸…å•**:
- [ ] æƒåˆ©å«å£«æ˜¯å¦å·²å®‰è£…
- [ ] åŒ…åæ˜¯å¦æ­£ç¡® (com.unitrust.tsa)
- [ ] æ— éšœç¢æœåŠ¡æ˜¯å¦å¼€å¯
- [ ] æ˜¯å¦æœ‰å¯åŠ¨å…¶ä»–åº”ç”¨çš„æƒé™

**å¸¸è§åŸå› å’Œè§£å†³æ–¹æ¡ˆ**:

#### åŸå› 1: getLaunchIntentForPackageè¿”å›null

**ç°è±¡**: æ—¥å¿—æ˜¾ç¤º"æ–¹æ³•1å¤±è´¥,å°è¯•æ–¹æ³•2"

**åŸå› **: `PackageManager.getLaunchIntentForPackage()`åœ¨æŸäº›æƒ…å†µä¸‹ä¼šè¿”å›null

**è§£å†³æ–¹æ¡ˆ**: ä½¿ç”¨æ˜¾å¼Intent
```java
// âŒ ä¸å¯é çš„æ–¹æ³•
Intent intent = getPackageManager().getLaunchIntentForPackage(TARGET_PACKAGE);

// âœ… å¯é çš„æ–¹æ³•
Intent intent = new Intent();
intent.setClassName(TARGET_PACKAGE, TARGET_ACTIVITY);
intent.setAction(Intent.ACTION_MAIN);
intent.addCategory(Intent.CATEGORY_LAUNCHER);
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent);
```

#### åŸå› 2: Activityåç§°é”™è¯¯

**ç°è±¡**: åº”ç”¨æ— æ³•å¯åŠ¨æˆ–å¯åŠ¨åç«‹å³å´©æºƒ

**æ­£ç¡®çš„Activityåç§°**:
```java
private static final String TARGET_PACKAGE = "com.unitrust.tsa";
private static final String TARGET_ACTIVITY = "cn.tsa.activity.SplashActivity";
```

**æŸ¥æ‰¾Activityåç§°çš„æ–¹æ³•**:
```bash
# æŸ¥çœ‹åº”ç”¨çš„å¯åŠ¨Activity
adb shell dumpsys package com.unitrust.tsa | grep -A5 "android.intent.action.MAIN"
```

#### åŸå› 3: æ— éšœç¢æœåŠ¡æ²¡æœ‰æƒé™æ‰§è¡Œshellå‘½ä»¤

**ç°è±¡**: ä½¿ç”¨`Runtime.exec()`æ‰§è¡Œam startå‘½ä»¤æ— æ•ˆ

**è§£å†³æ–¹æ¡ˆ**: ä½¿ç”¨`startActivity()`è€Œä¸æ˜¯shellå‘½ä»¤
```java
// âŒ å¯èƒ½æ— æ•ˆ
Runtime.getRuntime().exec("am start -n com.unitrust.tsa/cn.tsa.activity.SplashActivity");

// âœ… æ¨èæ–¹æ³•
Intent intent = new Intent();
intent.setClassName("com.unitrust.tsa", "cn.tsa.activity.SplashActivity");
startActivity(intent);
```

**æ‰‹åŠ¨æµ‹è¯•**:
```bash
# æ£€æŸ¥åº”ç”¨æ˜¯å¦å®‰è£…
adb shell pm list packages | grep unitrust

# æ‰‹åŠ¨å¯åŠ¨åº”ç”¨
adb shell am start -n com.unitrust.tsa/cn.tsa.activity.SplashActivity

# æŸ¥çœ‹æ—¥å¿—
adb logcat | grep "AutomationService"
```

---

### Q7.1: ç¼–è¯‘æ—¶å‡ºç°åŒ¿åå†…éƒ¨ç±»é”™è¯¯?

**é”™è¯¯ä¿¡æ¯**:
```
Compilation failed to complete, origin: .../AutomationAccessibilityService$1.class
Caused by: java.lang.NullPointerException
```

**åŸå› **: æŸäº›Androidç‰ˆæœ¬çš„D8ç¼–è¯‘å™¨å¯¹åŒ¿åå†…éƒ¨ç±»æ”¯æŒä¸å®Œå–„

**è§£å†³æ–¹æ¡ˆ**: ä½¿ç”¨é™æ€å†…éƒ¨ç±»ä»£æ›¿åŒ¿åå†…éƒ¨ç±»

```java
// âŒ ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯
new Thread() {
    public void run() {
        openTargetApp();
    }
}.start();

// âŒ ä¹Ÿä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯
new Handler().postDelayed(new Runnable() {
    @Override
    public void run() {
        openTargetApp();
    }
}, 500);

// âœ… æ­£ç¡®çš„æ–¹æ³•
private static class DelayThread extends Thread {
    @Override
    public void run() {
        try {
            Thread.sleep(500);
            if (instance != null) {
                instance.openTargetApp();
            }
        } catch (Exception e) {
            Log.e(TAG, "å»¶è¿Ÿæ‰“å¼€åº”ç”¨å¤±è´¥: " + e.getMessage());
        }
    }
}

// ä½¿ç”¨
DelayThread thread = new DelayThread();
thread.start();
```

---

### Q8: æ‰¾ä¸åˆ°"å¼€å§‹å½•å±"æŒ‰é’®?

**å¯èƒ½åŸå› **:
- ç•Œé¢æœªåŠ è½½å®Œæˆ
- Resource IDå˜åŒ– (åº”ç”¨ç‰ˆæœ¬æ›´æ–°)
- ç•Œé¢å¸ƒå±€æ”¹å˜

**æ’æŸ¥æ–¹æ³•**:
1. ä½¿ç”¨UI Automator VieweræŸ¥çœ‹å½“å‰ç•Œé¢
2. æ£€æŸ¥Resource IDæ˜¯å¦æ­£ç¡®
3. å¢åŠ ç­‰å¾…æ—¶é—´
4. æ£€æŸ¥åº”ç”¨ç‰ˆæœ¬æ˜¯å¦åŒ¹é…

**ä¸´æ—¶è§£å†³**:
```java
// å¢åŠ ç­‰å¾…æ—¶é—´
SystemClock.sleep(3000);

// ä½¿ç”¨æ–‡æœ¬æŸ¥æ‰¾ä½œä¸ºå¤‡é€‰æ–¹æ¡ˆ
List<AccessibilityNodeInfo> nodes = 
    rootNode.findAccessibilityNodeInfosByText("å¼€å§‹å½•å±å–è¯");
```

---

### Q9: ç‚¹å‡»æŒ‰é’®æ²¡æœ‰ååº”?

**å¯èƒ½åŸå› **:
- æ§ä»¶ä¸å¯ç‚¹å‡»
- æ§ä»¶è¢«é®æŒ¡
- ç‚¹å‡»äº‹ä»¶è¢«æ‹¦æˆª

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥æ§ä»¶æ˜¯å¦å¯ç‚¹å‡»:
```java
if (node.isClickable()) {
    node.performAction(AccessibilityNodeInfo.ACTION_CLICK);
}
```

2. å°è¯•ç‚¹å‡»çˆ¶èŠ‚ç‚¹:
```java
AccessibilityNodeInfo parent = node.getParent();
if (parent != null && parent.isClickable()) {
    parent.performAction(AccessibilityNodeInfo.ACTION_CLICK);
}
```

3. ä½¿ç”¨å…¨å±€æ‰‹åŠ¿:
```java
Path path = new Path();
Rect rect = new Rect();
node.getBoundsInScreen(rect);
path.moveTo(rect.centerX(), rect.centerY());

GestureDescription gesture = new GestureDescription.Builder()
    .addStroke(new GestureDescription.StrokeDescription(path, 0, 100))
    .build();

dispatchGesture(gesture, null, null);
```

---

## ğŸ“± vivoè®¾å¤‡ä¸“å±é—®é¢˜

### Q10: å¦‚ä½•å…³é—­vivoè®¾å¤‡çš„ç”µæ± ä¼˜åŒ–?

**æ­¥éª¤**:
1. æ‰“å¼€ è®¾ç½®
2. è¿›å…¥ ç”µæ± 
3. é€‰æ‹© åå°é«˜è€—ç”µ
4. æ‰¾åˆ°"æƒåˆ©å«å£«è‡ªåŠ¨åŒ–"
5. é€‰æ‹©"å…è®¸"

**æˆ–è€…**:
1. è®¾ç½® > åº”ç”¨ä¸æƒé™ > åº”ç”¨ç®¡ç†
2. æ‰¾åˆ°"æƒåˆ©å«å£«è‡ªåŠ¨åŒ–"
3. ç”µæ±  > åå°è€—ç”µç®¡ç†
4. é€‰æ‹©"å…è®¸åå°é«˜è€—ç”µ"

**éªŒè¯æ–¹æ³•**:
```bash
adb shell dumpsys deviceidle whitelist | grep <åŒ…å>
```

---

### Q11: å¦‚ä½•å¼€å¯vivoè®¾å¤‡çš„è‡ªå¯åŠ¨?

**æ­¥éª¤**:
1. è®¾ç½® > åº”ç”¨ä¸æƒé™
2. é€‰æ‹© è‡ªå¯åŠ¨
3. æ‰¾åˆ°"æƒåˆ©å«å£«è‡ªåŠ¨åŒ–"
4. æ‰“å¼€å¼€å…³

**é‡è¦**: åŒæ—¶éœ€è¦å¼€å¯"æƒåˆ©å«å£«"çš„è‡ªå¯åŠ¨

---

### Q12: vivoè®¾å¤‡åå°åº”ç”¨è¢«æ€æ­»?

**å®Œæ•´é…ç½®æ¸…å•**:

1. **è‡ªå¯åŠ¨**: è®¾ç½® > åº”ç”¨ä¸æƒé™ > è‡ªå¯åŠ¨ > å…è®¸
2. **åå°é«˜è€—ç”µ**: è®¾ç½® > ç”µæ±  > åå°é«˜è€—ç”µ > å…è®¸
3. **åå°å¼¹å‡ºç•Œé¢**: è®¾ç½® > åº”ç”¨ä¸æƒé™ > åº”ç”¨ç®¡ç† > æƒé™ > åå°å¼¹å‡ºç•Œé¢ > å…è®¸
4. **é”å®šåå°**: å¤šä»»åŠ¡ç•Œé¢ä¸‹æ‹‰åº”ç”¨å¡ç‰‡é”å®š
5. **å…³é—­çœç”µæ¨¡å¼**: è®¾ç½® > ç”µæ±  > çœç”µæ¨¡å¼ > å…³é—­

**ç»ˆææ–¹æ¡ˆ**:
```bash
# é€šè¿‡ADBç¦ç”¨ç”µæ± ä¼˜åŒ–
adb shell dumpsys deviceidle whitelist +<åŒ…å>
```

---

### Q13: vivoè®¾å¤‡æ— éšœç¢æœåŠ¡é¢‘ç¹æ–­å¼€?

**åŸå› **: vivoçš„Funtouch OSå¯¹æ— éšœç¢æœåŠ¡ç®¡æ§ä¸¥æ ¼

**è§£å†³æ–¹æ¡ˆ**:
1. å®ŒæˆQ10-Q12çš„æ‰€æœ‰é…ç½®
2. åœ¨å¼€å‘è€…é€‰é¡¹ä¸­å…³é—­"ä¸ä¿ç•™æ´»åŠ¨"
3. åœ¨å¼€å‘è€…é€‰é¡¹ä¸­è®¾ç½®"åå°è¿›ç¨‹é™åˆ¶"ä¸º"æ ‡å‡†é™åˆ¶"
4. é‡å¯è®¾å¤‡åé‡æ–°å¼€å¯æ— éšœç¢æœåŠ¡

**å¼€å‘è€…é€‰é¡¹è®¾ç½®**:
```
è®¾ç½® > ç³»ç»Ÿç®¡ç† > å¼€å‘è€…é€‰é¡¹
- ä¸ä¿ç•™æ´»åŠ¨: å…³é—­
- åå°è¿›ç¨‹é™åˆ¶: æ ‡å‡†é™åˆ¶
```

---

## ğŸ“¹ å½•å±ç›¸å…³é—®é¢˜

### Q14: å½•å±æ— æ³•å¼€å§‹?

**æ£€æŸ¥æ¸…å•**:
- [ ] æƒåˆ©å«å£«æ˜¯å¦å·²ç™»å½•
- [ ] æ˜¯å¦æœ‰è¶³å¤Ÿçš„æ—¶é—´æˆ³é¢åº¦
- [ ] ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
- [ ] å­˜å‚¨ç©ºé—´æ˜¯å¦å……è¶³
- [ ] æ˜¯å¦æˆäºˆäº†å½•å±æƒé™

**æ‰‹åŠ¨æµ‹è¯•**:
1. æ‰‹åŠ¨æ‰“å¼€æƒåˆ©å«å£«
2. æ‰‹åŠ¨ç‚¹å‡»å¼€å§‹å½•å±
3. è§‚å¯Ÿæ˜¯å¦æœ‰é”™è¯¯æç¤º

---

### Q15: å½•å±ä¸­é€”ä¸­æ–­?

**å¸¸è§åŸå› **:
1. **é”å±** - å½•å±è¿‡ç¨‹ä¸­é”å±ä¼šå¯¼è‡´ä¸­æ–­
2. **æ¥ç”µ** - æ¥å¬æˆ–æ‹¨æ‰“ç”µè¯ä¼šä¸­æ–­
3. **å†…å­˜ä¸è¶³** - å½•å±å ç”¨å¤§é‡å†…å­˜
4. **åº”ç”¨å´©æºƒ** - æƒåˆ©å«å£«åº”ç”¨å´©æºƒ

**é¢„é˜²æªæ–½**:
1. å½•å±å‰æ¸…ç†åå°åº”ç”¨
2. ç¡®ä¿å­˜å‚¨ç©ºé—´å……è¶³ (1åˆ†é’Ÿçº¦20MB)
3. å½•å±æ—¶ä¸è¦é”å±
4. å½•å±æ—¶ä¸è¦æ¥å¬ç”µè¯
5. å»ºè®®å½•å±æ—¶é•¿ä¸è¶…è¿‡60åˆ†é’Ÿ

---

### Q16: å½•å±æ–‡ä»¶ä¿å­˜åœ¨å“ªé‡Œ?

**é»˜è®¤è·¯å¾„**:
```
/storage/emulated/0/Android/data/com.unitrust.tsa/files/
```

**æŸ¥çœ‹æ–¹æ³•**:
```bash
# åˆ—å‡ºå½•å±æ–‡ä»¶
adb shell ls -la /storage/emulated/0/Android/data/com.unitrust.tsa/files/

# å¯¼å‡ºåˆ°ç”µè„‘
adb pull /storage/emulated/0/Android/data/com.unitrust.tsa/files/xxx.mp4 ./
```

---

### Q17: å¦‚ä½•è‡ªåŠ¨åœæ­¢å½•å±?

**æ–¹æ³•1: é€šè¿‡é€šçŸ¥æ **
```java
// ç›‘å¬é€šçŸ¥æ çš„åœæ­¢æŒ‰é’®
private void clickStopButtonInNotification() {
    // å±•å¼€é€šçŸ¥æ 
    performGlobalAction(GLOBAL_ACTION_NOTIFICATIONS);

    // ç­‰å¾…é€šçŸ¥æ å±•å¼€
    SystemClock.sleep(1000);

    // æŸ¥æ‰¾åœæ­¢æŒ‰é’®
    AccessibilityNodeInfo rootNode = getRootInActiveWindow();
    List<AccessibilityNodeInfo> nodes =
        rootNode.findAccessibilityNodeInfosByText("åœæ­¢");

    if (!nodes.isEmpty()) {
        nodes.get(0).performAction(AccessibilityNodeInfo.ACTION_CLICK);
    }
}
```

**æ–¹æ³•2: è¿”å›åº”ç”¨ç‚¹å‡»åœæ­¢**
```java
// å¯åŠ¨æƒåˆ©å«å£«åº”ç”¨
launchRightsGuardApp();

// ç­‰å¾…ç•Œé¢åŠ è½½
SystemClock.sleep(2000);

// æŸ¥æ‰¾åœæ­¢æŒ‰é’®
AccessibilityNodeInfo stopButton =
    waitForElement("com.unitrust.tsa:id/btn_stop", 10);

if (stopButton != null) {
    stopButton.performAction(AccessibilityNodeInfo.ACTION_CLICK);
}
```

---

## âš¡ æ€§èƒ½å’Œç¨³å®šæ€§é—®é¢˜

### Q18: è‡ªåŠ¨åŒ–è¿è¡Œç¼“æ…¢?

**ä¼˜åŒ–å»ºè®®**:

1. **å‡å°‘ä¸å¿…è¦çš„ç­‰å¾…**:
```java
// ä¸å¥½çš„åšæ³•
SystemClock.sleep(5000); // å›ºå®šç­‰å¾…5ç§’

// å¥½çš„åšæ³•
waitForElement(resourceId, 5); // æœ€å¤šç­‰å¾…5ç§’,æ‰¾åˆ°å³è¿”å›
```

2. **ä¼˜åŒ–UIæŸ¥æ‰¾**:
```java
// ä¸å¥½çš„åšæ³•
List<AccessibilityNodeInfo> nodes =
    rootNode.findAccessibilityNodeInfosByText("å¼€å§‹"); // éå†æ•´ä¸ªUIæ ‘

// å¥½çš„åšæ³•
List<AccessibilityNodeInfo> nodes =
    rootNode.findAccessibilityNodeInfosByViewId(resourceId); // ç›´æ¥å®šä½
```

3. **åŠæ—¶é‡Šæ”¾èµ„æº**:
```java
AccessibilityNodeInfo node = findNode();
try {
    // ä½¿ç”¨node
} finally {
    if (node != null) {
        node.recycle(); // é‡Šæ”¾èµ„æº
    }
}
```

---

### Q19: å†…å­˜å ç”¨è¿‡é«˜?

**åŸå› **:
- AccessibilityNodeInfoæœªé‡Šæ”¾
- æ—¥å¿—è®°å½•è¿‡å¤š
- ç¼“å­˜æ•°æ®è¿‡å¤š

**è§£å†³æ–¹æ¡ˆ**:
1. åŠæ—¶è°ƒç”¨`node.recycle()`
2. æ§åˆ¶æ—¥å¿—è¾“å‡ºçº§åˆ«
3. å®šæœŸæ¸…ç†ç¼“å­˜
4. é¿å…ä¿å­˜å¤§é‡UIèŠ‚ç‚¹å¼•ç”¨

---

### Q20: å¦‚ä½•æé«˜è‡ªåŠ¨åŒ–ç¨³å®šæ€§?

**æœ€ä½³å®è·µ**:

1. **å®Œå–„çš„é”™è¯¯å¤„ç†**:
```java
try {
    performAutomation();
} catch (Exception e) {
    Log.e(TAG, "è‡ªåŠ¨åŒ–å¤±è´¥", e);
    recoverFromError();
}
```

2. **æ™ºèƒ½é‡è¯•æœºåˆ¶**:
```java
private boolean performActionWithRetry(Runnable action, int maxRetry) {
    for (int i = 0; i < maxRetry; i++) {
        try {
            action.run();
            return true;
        } catch (Exception e) {
            Log.w(TAG, "æ“ä½œå¤±è´¥,é‡è¯•: " + (i + 1));
            SystemClock.sleep(1000);
        }
    }
    return false;
}
```

3. **çŠ¶æ€ç›‘æ§å’Œæ¢å¤**:
```java
// å®šæœŸæ£€æŸ¥åº”ç”¨çŠ¶æ€
private void monitorAppHealth() {
    handler.postDelayed(() -> {
        if (!isAppRunning()) {
            Log.w(TAG, "åº”ç”¨å¼‚å¸¸,å°è¯•æ¢å¤");
            recoverFromError();
        }
        monitorAppHealth(); // ç»§ç»­ç›‘æ§
    }, 5000);
}
```

4. **è¯¦ç»†çš„æ—¥å¿—è®°å½•**:
```java
Log.d(TAG, "æ­¥éª¤1: å¯åŠ¨åº”ç”¨");
Log.d(TAG, "æ­¥éª¤2: ç­‰å¾…ç•Œé¢åŠ è½½");
Log.d(TAG, "æ­¥éª¤3: æŸ¥æ‰¾æŒ‰é’®");
Log.d(TAG, "æ­¥éª¤4: ç‚¹å‡»æŒ‰é’®");
```

---

## ğŸ” è°ƒè¯•æŠ€å·§

### Q21: å¦‚ä½•æŸ¥çœ‹å®æ—¶æ—¥å¿—?

**æ–¹æ³•1: Android Studio**
1. è¿æ¥è®¾å¤‡
2. æ‰“å¼€Logcatçª—å£
3. è¿‡æ»¤åŒ…åæˆ–TAG

**æ–¹æ³•2: ADBå‘½ä»¤**
```bash
# å®æ—¶æŸ¥çœ‹æ—¥å¿—
adb logcat | grep "AutomationService"

# ä¿å­˜æ—¥å¿—åˆ°æ–‡ä»¶
adb logcat > automation.log

# åªçœ‹é”™è¯¯æ—¥å¿—
adb logcat *:E
```

---

### Q22: å¦‚ä½•åˆ†æUIç»“æ„?

**å·¥å…·1: UI Automator Viewer**
```bash
cd $ANDROID_HOME/tools/bin
./uiautomatorviewer
```

**å·¥å…·2: Layout Inspector (Android Studio)**
1. Tools > Layout Inspector
2. é€‰æ‹©è®¾å¤‡å’Œè¿›ç¨‹
3. æŸ¥çœ‹UIå±‚çº§

**å·¥å…·3: ADBå‘½ä»¤**
```bash
# å¯¼å‡ºUIå±‚çº§
adb shell uiautomator dump /sdcard/ui.xml
adb pull /sdcard/ui.xml
```

---

### Q23: å¦‚ä½•æµ‹è¯•ç‰¹å®šåŠŸèƒ½?

**å•å…ƒæµ‹è¯•ç¤ºä¾‹**:
```java
@Test
public void testFindStartButton() {
    // æ¨¡æ‹Ÿåœºæ™¯
    AccessibilityNodeInfo mockRoot = createMockUI();

    // æ‰§è¡Œæµ‹è¯•
    AccessibilityNodeInfo button = findStartButton(mockRoot);

    // éªŒè¯ç»“æœ
    assertNotNull(button);
    assertEquals("å¼€å§‹å½•å±å–è¯", button.getText());
}
```

**é›†æˆæµ‹è¯•**:
1. å®‰è£…åº”ç”¨åˆ°çœŸæœº
2. å¼€å¯æ— éšœç¢æœåŠ¡
3. è¿è¡Œè‡ªåŠ¨åŒ–æµç¨‹
4. è§‚å¯Ÿæ—¥å¿—å’Œç»“æœ

---

## ğŸ“ è·å–å¸®åŠ©

### é‡åˆ°é—®é¢˜æ€ä¹ˆåŠ?

1. **æŸ¥çœ‹æ–‡æ¡£**:
   - [å¼€å‘æŒ‡å—](./å¼€å‘æŒ‡å—.md)
   - [è‡ªåŠ¨åŒ–æ–‡æ¡£](./è‡ªåŠ¨åŒ–æ–‡æ¡£.md)

2. **æŸ¥çœ‹æ—¥å¿—**:
   ```bash
   adb logcat | grep -E "AutomationService|AndroidRuntime"
   ```

3. **æ£€æŸ¥ç¯å¢ƒ**:
   - Androidç‰ˆæœ¬
   - åº”ç”¨ç‰ˆæœ¬
   - æƒé™é…ç½®

4. **æä¾›ä¿¡æ¯**:
   - è®¾å¤‡å‹å·å’Œç³»ç»Ÿç‰ˆæœ¬
   - åº”ç”¨ç‰ˆæœ¬
   - é”™è¯¯æ—¥å¿—
   - å¤ç°æ­¥éª¤

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [å¼€å‘æŒ‡å—](./å¼€å‘æŒ‡å—.md) - å¼€å‘ç¯å¢ƒå’Œé…ç½®
- [è‡ªåŠ¨åŒ–æ–‡æ¡£](./è‡ªåŠ¨åŒ–æ–‡æ¡£.md) - æŠ€æœ¯å®ç°ç»†èŠ‚
- [Gitç‰ˆæœ¬è®°å½•](./Gitç‰ˆæœ¬è®°å½•.md) - ç‰ˆæœ¬æ›´æ–°å†å²

---

[â† è¿”å›README](../README.md)

**æœ€åæ›´æ–°**: 2026-01-19

