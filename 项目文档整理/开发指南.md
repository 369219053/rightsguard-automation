# å¼€å‘æŒ‡å—

[â† è¿”å›README](../README.md)

---

## ğŸ“‹ ç›®å½•

1. [ç¯å¢ƒé…ç½®](#ç¯å¢ƒé…ç½®)
2. [æŠ€æœ¯æ¶æ„](#æŠ€æœ¯æ¶æ„)
3. [å¼€å‘æµç¨‹](#å¼€å‘æµç¨‹)
4. [æ ¸å¿ƒæ¨¡å—](#æ ¸å¿ƒæ¨¡å—)
5. [è°ƒè¯•æŠ€å·§](#è°ƒè¯•æŠ€å·§)
6. [éƒ¨ç½²æŒ‡å—](#éƒ¨ç½²æŒ‡å—)

---

## ğŸ”§ ç¯å¢ƒé…ç½®

### å¼€å‘ç¯å¢ƒè¦æ±‚

#### å¿…éœ€è½¯ä»¶
- **Android Studio**: Arctic Fox (2020.3.1) æˆ–æ›´é«˜ç‰ˆæœ¬
- **JDK**: JDK 11 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Gradle**: 7.0+ (é€šè¿‡Android Studioè‡ªåŠ¨ç®¡ç†)
- **Android SDK**: API 26 - API 33

#### æ¨èå·¥å…·
- **ADB**: Androidè°ƒè¯•æ¡¥ (Android SDKè‡ªå¸¦)
- **Scrcpy**: å±å¹•é•œåƒå·¥å…· (ç”¨äºè¿œç¨‹è°ƒè¯•)
- **Vysor**: è®¾å¤‡æ§åˆ¶å·¥å…· (å¯é€‰)

### æµ‹è¯•è®¾å¤‡è¦æ±‚

#### ç¡¬ä»¶è¦æ±‚
- **è®¾å¤‡å“ç‰Œ**: vivo (ä¼˜å…ˆ)ã€å°ç±³ã€åä¸ºç­‰
- **Androidç‰ˆæœ¬**: Android 8.0 (API 26) æˆ–æ›´é«˜
- **å†…å­˜**: 4GB+ RAM
- **å­˜å‚¨**: 2GB+ å¯ç”¨ç©ºé—´

#### è½¯ä»¶è¦æ±‚
- å·²å®‰è£…æƒåˆ©å«å£«åº”ç”¨ (v4.7.0.0+)
- å·²å¼€å¯å¼€å‘è€…é€‰é¡¹
- å·²å¼€å¯USBè°ƒè¯•
- å·²æˆäºˆå¿…è¦æƒé™

### é¡¹ç›®é…ç½®

#### 1. å…‹éš†é¡¹ç›®
```bash
git clone <é¡¹ç›®åœ°å€>
cd æƒåˆ©å«å£«å–è¯è‡ªåŠ¨åŒ–
```

#### 2. å¯¼å…¥Android Studio
1. æ‰“å¼€Android Studio
2. é€‰æ‹© "Open an Existing Project"
3. é€‰æ‹©é¡¹ç›®æ ¹ç›®å½•
4. ç­‰å¾…GradleåŒæ­¥å®Œæˆ

#### 3. é…ç½®ç­¾å
åœ¨ `app/build.gradle` ä¸­é…ç½®ç­¾åä¿¡æ¯:
```gradle
android {
    signingConfigs {
        release {
            storeFile file("your-keystore.jks")
            storePassword "your-password"
            keyAlias "your-alias"
            keyPassword "your-password"
        }
    }
}
```

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         è‡ªåŠ¨åŒ–APKåº”ç”¨                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  UIå±‚ (Activity/Fragment)           â”‚
â”‚  - ä»»åŠ¡é…ç½®ç•Œé¢                      â”‚
â”‚  - çŠ¶æ€ç›‘æ§ç•Œé¢                      â”‚
â”‚  - æ—¥å¿—æŸ¥çœ‹ç•Œé¢                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ä¸šåŠ¡é€»è¾‘å±‚ (Service)                â”‚
â”‚  - AutomationService (æ ¸å¿ƒæœåŠ¡)     â”‚
â”‚  - TaskManager (ä»»åŠ¡ç®¡ç†)           â”‚
â”‚  - StateMonitor (çŠ¶æ€ç›‘æ§)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è‡ªåŠ¨åŒ–å±‚ (Accessibility)            â”‚
â”‚  - AccessibilityService (æ— éšœç¢)    â”‚
â”‚  - UIAutomator (UIè‡ªåŠ¨åŒ–)           â”‚
â”‚  - EventDispatcher (äº‹ä»¶åˆ†å‘)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å·¥å…·å±‚ (Utils)                      â”‚
â”‚  - Logger (æ—¥å¿—)                     â”‚
â”‚  - PermissionHelper (æƒé™)          â”‚
â”‚  - DeviceHelper (è®¾å¤‡ä¿¡æ¯)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ æ§åˆ¶
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         æƒåˆ©å«å£«åº”ç”¨                 â”‚
â”‚     (com.unitrust.tsa)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒæŠ€æœ¯é€‰å‹

#### 1. Accessibility Service (æ— éšœç¢æœåŠ¡)
- **ä½œç”¨**: è·å–UIå…ƒç´ ä¿¡æ¯,æ¨¡æ‹Ÿç”¨æˆ·æ“ä½œ
- **ä¼˜åŠ¿**: ç³»ç»Ÿçº§æœåŠ¡,ç¨³å®šå¯é ,æ— éœ€Root
- **é™åˆ¶**: éœ€è¦ç”¨æˆ·æ‰‹åŠ¨å¼€å¯æƒé™

#### 2. UI Automator
- **ä½œç”¨**: è¾…åŠ©å®šä½UIå…ƒç´ 
- **ä¼˜åŠ¿**: æ”¯æŒè·¨åº”ç”¨æ“ä½œ
- **ä½¿ç”¨**: é…åˆAccessibility Serviceä½¿ç”¨

#### 3. Foreground Service (å‰å°æœåŠ¡)
- **ä½œç”¨**: ä¿æŒåº”ç”¨åœ¨åå°è¿è¡Œ
- **ä¼˜åŠ¿**: ä¸æ˜“è¢«ç³»ç»Ÿæ€æ­»
- **è¦æ±‚**: å¿…é¡»æ˜¾ç¤ºé€šçŸ¥æ å›¾æ ‡

---

## ğŸ”„ å¼€å‘æµç¨‹

### 1. éœ€æ±‚åˆ†æé˜¶æ®µ
1. æ˜ç¡®è‡ªåŠ¨åŒ–ç›®æ ‡å’Œæµç¨‹
2. åˆ†ææƒåˆ©å«å£«åº”ç”¨UIç»“æ„
3. ç¡®å®šéœ€è¦è‡ªåŠ¨åŒ–çš„æ“ä½œæ­¥éª¤
4. è¯„ä¼°æŠ€æœ¯å¯è¡Œæ€§

### 2. è®¾è®¡é˜¶æ®µ
1. è®¾è®¡è‡ªåŠ¨åŒ–æµç¨‹å›¾
2. è®¾è®¡æ•°æ®ç»“æ„å’Œæ¥å£
3. è®¾è®¡é”™è¯¯å¤„ç†æœºåˆ¶
4. è®¾è®¡æ—¥å¿—è®°å½•æ–¹æ¡ˆ

### 3. å¼€å‘é˜¶æ®µ
1. åˆ›å»ºAccessibility Service
2. å®ç°UIå…ƒç´ å®šä½é€»è¾‘
3. å®ç°è‡ªåŠ¨åŒ–æ“ä½œæµç¨‹
4. å®ç°ä»»åŠ¡ç®¡ç†åŠŸèƒ½
5. å®ç°çŠ¶æ€ç›‘æ§åŠŸèƒ½

### 4. æµ‹è¯•é˜¶æ®µ
1. å•å…ƒæµ‹è¯• (æ ¸å¿ƒé€»è¾‘)
2. é›†æˆæµ‹è¯• (å®Œæ•´æµç¨‹)
3. çœŸæœºæµ‹è¯• (vivoè®¾å¤‡)
4. å‹åŠ›æµ‹è¯• (æ‰¹é‡ä»»åŠ¡)

### 5. éƒ¨ç½²é˜¶æ®µ
1. æ‰“åŒ…APK
2. ç­¾åAPK
3. å®‰è£…åˆ°ç›®æ ‡è®¾å¤‡
4. é…ç½®è®¾å¤‡æƒé™
5. éªŒè¯åŠŸèƒ½æ­£å¸¸

---

## ğŸ§© æ ¸å¿ƒæ¨¡å—

### 1. AutomationAccessibilityService

**åŠŸèƒ½**: æ ¸å¿ƒæ— éšœç¢æœåŠ¡,è´Ÿè´£UIè‡ªåŠ¨åŒ–æ“ä½œ

**å…³é”®æ–¹æ³•**:
```java
public class AutomationAccessibilityService extends AccessibilityService {
    
    // ç›‘å¬UIäº‹ä»¶
    @Override
    public void onAccessibilityEvent(AccessibilityEvent event) {
        // å¤„ç†UIå˜åŒ–äº‹ä»¶
    }
    
    // æŸ¥æ‰¾UIå…ƒç´ 
    private AccessibilityNodeInfo findNodeByResourceId(String resourceId) {
        // é€šè¿‡Resource IDæŸ¥æ‰¾èŠ‚ç‚¹
    }
    
    // ç‚¹å‡»UIå…ƒç´ 
    private boolean clickNode(AccessibilityNodeInfo node) {
        // æ¨¡æ‹Ÿç‚¹å‡»æ“ä½œ
    }
}
```

**é…ç½®æ–‡ä»¶**: `res/xml/accessibility_service_config.xml`

### 2. TaskManager (ä»»åŠ¡ç®¡ç†å™¨)

**åŠŸèƒ½**: ç®¡ç†è‡ªåŠ¨åŒ–ä»»åŠ¡é˜Ÿåˆ—å’Œæ‰§è¡Œ

**å…³é”®åŠŸèƒ½**:
- ä»»åŠ¡é˜Ÿåˆ—ç®¡ç†
- ä»»åŠ¡è°ƒåº¦æ‰§è¡Œ
- ä»»åŠ¡çŠ¶æ€è·Ÿè¸ª
- å¤±è´¥é‡è¯•æœºåˆ¶

**æ ¸å¿ƒä»£ç **:
```java
public class TaskManager {
    private Queue<AutomationTask> taskQueue;
    private TaskExecutor executor;

    // æ·»åŠ ä»»åŠ¡
    public void addTask(AutomationTask task) {
        taskQueue.offer(task);
    }

    // æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡
    public void executeNext() {
        AutomationTask task = taskQueue.poll();
        if (task != null) {
            executor.execute(task);
        }
    }
}
```

### 3. StateMonitor (çŠ¶æ€ç›‘æ§)

**åŠŸèƒ½**: ç›‘æ§å½•å±çŠ¶æ€å’Œåº”ç”¨çŠ¶æ€

**ç›‘æ§å†…å®¹**:
- æƒåˆ©å«å£«åº”ç”¨æ˜¯å¦åœ¨å‰å°
- å½•å±æ˜¯å¦å·²å¼€å§‹
- å½•å±æ˜¯å¦å·²ç»“æŸ
- æ˜¯å¦å‡ºç°é”™è¯¯å¼¹çª—

**å®ç°æ–¹å¼**:
- é€šè¿‡Accessibility Eventç›‘å¬UIå˜åŒ–
- é€šè¿‡å®šæ—¶å™¨è½®è¯¢æ£€æŸ¥çŠ¶æ€
- é€šè¿‡é€šçŸ¥æ ç›‘å¬å½•å±çŠ¶æ€

### 4. PermissionHelper (æƒé™åŠ©æ‰‹)

**åŠŸèƒ½**: æ£€æŸ¥å’Œç”³è¯·å¿…è¦æƒé™

**éœ€è¦çš„æƒé™**:
- æ— éšœç¢æœåŠ¡æƒé™
- æ‚¬æµ®çª—æƒé™
- é€šçŸ¥æƒé™
- å­˜å‚¨æƒé™

**æ ¸å¿ƒæ–¹æ³•**:
```java
public class PermissionHelper {

    // æ£€æŸ¥æ— éšœç¢æœåŠ¡æ˜¯å¦å¼€å¯
    public static boolean isAccessibilityEnabled(Context context) {
        // æ£€æŸ¥é€»è¾‘
    }

    // è·³è½¬åˆ°æ— éšœç¢è®¾ç½®é¡µé¢
    public static void openAccessibilitySettings(Context context) {
        Intent intent = new Intent(Settings.ACTION_ACCESSIBILITY_SETTINGS);
        context.startActivity(intent);
    }
}
```

---

## ğŸ› è°ƒè¯•æŠ€å·§

### 1. ä½¿ç”¨ADBæŸ¥çœ‹æ—¥å¿—

```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
adb logcat | grep "AutomationService"

# æŸ¥çœ‹Accessibilityäº‹ä»¶
adb logcat | grep "AccessibilityEvent"

# æ¸…é™¤æ—¥å¿—
adb logcat -c
```

### 2. ä½¿ç”¨Layout Inspector

1. åœ¨Android Studioä¸­æ‰“å¼€ Tools > Layout Inspector
2. é€‰æ‹©ç›®æ ‡è®¾å¤‡å’Œè¿›ç¨‹
3. æŸ¥çœ‹UIå±‚çº§ç»“æ„
4. è·å–Resource IDå’Œæ§ä»¶å±æ€§

### 3. ä½¿ç”¨UI Automator Viewer

```bash
# å¯åŠ¨UI Automator Viewer
cd $ANDROID_HOME/tools/bin
./uiautomatorviewer
```

åŠŸèƒ½:
- æˆªå–å½“å‰å±å¹•UI
- æŸ¥çœ‹æ§ä»¶å±‚çº§
- è·å–æ§ä»¶å±æ€§
- å®šä½Resource ID

### 4. è¿œç¨‹è°ƒè¯•

ä½¿ç”¨Scrcpyè¿›è¡Œè¿œç¨‹è°ƒè¯•:
```bash
# å®‰è£…scrcpy
brew install scrcpy

# å¯åŠ¨é•œåƒ
scrcpy

# å¯åŠ¨é•œåƒå¹¶å½•å±
scrcpy --record automation-test.mp4
```

### 5. æ—¥å¿—è®°å½•

åœ¨ä»£ç ä¸­æ·»åŠ è¯¦ç»†æ—¥å¿—:
```java
private static final String TAG = "AutomationService";

Log.d(TAG, "å¼€å§‹æŸ¥æ‰¾å½•å±æŒ‰é’®");
Log.d(TAG, "æ‰¾åˆ°æŒ‰é’®: " + node.getText());
Log.e(TAG, "ç‚¹å‡»å¤±è´¥: " + e.getMessage());
```

---

## ğŸš€ éƒ¨ç½²æŒ‡å—

### 1. æ‰“åŒ…APK

#### Debugç‰ˆæœ¬
```bash
./gradlew assembleDebug
```
è¾“å‡º: `app/build/outputs/apk/debug/app-debug.apk`

#### Releaseç‰ˆæœ¬
```bash
./gradlew assembleRelease
```
è¾“å‡º: `app/build/outputs/apk/release/app-release.apk`

### 2. ç­¾åAPK

å¦‚æœReleaseç‰ˆæœ¬æœªè‡ªåŠ¨ç­¾å:
```bash
jarsigner -verbose -sigalg SHA256withRSA -digestalg SHA-256 \
  -keystore your-keystore.jks \
  app-release-unsigned.apk your-alias
```

### 3. å®‰è£…åˆ°è®¾å¤‡

```bash
# é€šè¿‡ADBå®‰è£…
adb install app-release.apk

# è¦†ç›–å®‰è£…
adb install -r app-release.apk

# å®‰è£…åˆ°å¤šä¸ªè®¾å¤‡
adb -s <device-id> install app-release.apk
```

### 4. é…ç½®è®¾å¤‡æƒé™

#### vivoè®¾å¤‡é…ç½®æ¸…å•
1. **å¼€å¯æ— éšœç¢æœåŠ¡**
   - è®¾ç½® > æ›´å¤šè®¾ç½® > æ— éšœç¢ > å·²å®‰è£…çš„æœåŠ¡
   - æ‰¾åˆ°"æƒåˆ©å«å£«è‡ªåŠ¨åŒ–"å¹¶å¼€å¯

2. **å¼€å¯æ‚¬æµ®çª—æƒé™**
   - è®¾ç½® > åº”ç”¨ä¸æƒé™ > æƒé™ç®¡ç† > æ‚¬æµ®çª—
   - æ‰¾åˆ°"æƒåˆ©å«å£«è‡ªåŠ¨åŒ–"å¹¶å…è®¸

3. **å¼€å¯è‡ªå¯åŠ¨**
   - è®¾ç½® > åº”ç”¨ä¸æƒé™ > è‡ªå¯åŠ¨
   - æ‰¾åˆ°"æƒåˆ©å«å£«è‡ªåŠ¨åŒ–"å¹¶å…è®¸

4. **å…³é—­ç”µæ± ä¼˜åŒ–**
   - è®¾ç½® > ç”µæ±  > åå°é«˜è€—ç”µ
   - æ‰¾åˆ°"æƒåˆ©å«å£«è‡ªåŠ¨åŒ–"å¹¶å…è®¸

5. **å…è®¸åå°è¿è¡Œ**
   - è®¾ç½® > åº”ç”¨ä¸æƒé™ > åº”ç”¨ç®¡ç†
   - æ‰¾åˆ°"æƒåˆ©å«å£«è‡ªåŠ¨åŒ–" > æƒé™ > åå°å¼¹å‡ºç•Œé¢
   - è®¾ç½®ä¸º"å…è®¸"

### 5. éªŒè¯åŠŸèƒ½

#### åŠŸèƒ½æ£€æŸ¥æ¸…å•
- [ ] åº”ç”¨èƒ½æ­£å¸¸å¯åŠ¨
- [ ] æ— éšœç¢æœåŠ¡å·²å¼€å¯
- [ ] èƒ½è‡ªåŠ¨å¯åŠ¨æƒåˆ©å«å£«
- [ ] èƒ½è‡ªåŠ¨ç‚¹å‡»å½•å±æŒ‰é’®
- [ ] èƒ½å¤„ç†ç³»ç»Ÿæƒé™å¼¹çª—
- [ ] èƒ½ç›‘æ§å½•å±çŠ¶æ€
- [ ] èƒ½è‡ªåŠ¨åœæ­¢å½•å±
- [ ] æ—¥å¿—è®°å½•æ­£å¸¸

#### æµ‹è¯•å‘½ä»¤
```bash
# æŸ¥çœ‹åº”ç”¨æ˜¯å¦å®‰è£…
adb shell pm list packages | grep automation

# æŸ¥çœ‹åº”ç”¨è¿›ç¨‹
adb shell ps | grep automation

# æŸ¥çœ‹æ— éšœç¢æœåŠ¡çŠ¶æ€
adb shell settings get secure enabled_accessibility_services
```

---

## ğŸ“ å¼€å‘è§„èŒƒ

### ä»£ç è§„èŒƒ
- ä½¿ç”¨Java/Kotlinæ ‡å‡†å‘½åè§„èŒƒ
- ç±»åä½¿ç”¨å¤§é©¼å³° (PascalCase)
- æ–¹æ³•åä½¿ç”¨å°é©¼å³° (camelCase)
- å¸¸é‡ä½¿ç”¨å…¨å¤§å†™ä¸‹åˆ’çº¿ (UPPER_SNAKE_CASE)
- æ·»åŠ å¿…è¦çš„ä¸­æ–‡æ³¨é‡Š

### æ—¥å¿—è§„èŒƒ
- ä½¿ç”¨ç»Ÿä¸€çš„TAG
- Debugæ—¥å¿—ä½¿ç”¨Log.d()
- é”™è¯¯æ—¥å¿—ä½¿ç”¨Log.e()
- é‡è¦æ“ä½œè®°å½•æ—¥å¿—
- é¿å…æ•æ„Ÿä¿¡æ¯æ³„éœ²

### å¼‚å¸¸å¤„ç†
- æ‰€æœ‰å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„ä»£ç éƒ½è¦try-catch
- æ•è·å¼‚å¸¸åè®°å½•æ—¥å¿—
- æä¾›å‹å¥½çš„é”™è¯¯æç¤º
- å®ç°å¤±è´¥é‡è¯•æœºåˆ¶

---

## ğŸ”— ç›¸å…³èµ„æº

### å®˜æ–¹æ–‡æ¡£
- [Android Accessibility Service](https://developer.android.com/guide/topics/ui/accessibility/service)
- [Android UI Automator](https://developer.android.com/training/testing/ui-automator)
- [Android Foreground Service](https://developer.android.com/guide/components/foreground-services)

### å¼€å‘å·¥å…·
- [Android Studio](https://developer.android.com/studio)
- [Scrcpy](https://github.com/Genymobile/scrcpy)
- [ADB](https://developer.android.com/studio/command-line/adb)

---

[â† è¿”å›README](../README.md)

**æœ€åæ›´æ–°**: 2026-01-19

